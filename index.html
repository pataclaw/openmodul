<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>(@_@)</title>

  <!-- Site shell -->
  <link rel="stylesheet" href="css/site.css">
  <link rel="stylesheet" href="css/windows.css">

  <!-- Nullamp visualizer -->
  <link rel="stylesheet" href="css/nullamp.css">

  <!-- Gum Modul effects pedal -->
  <link rel="stylesheet" href="css/gummodul.css">

  <!-- Patchwerk modular synth -->
  <link rel="stylesheet" href="css/patchwerk.css">

  <!-- Gravity Harp -->
  <link rel="stylesheet" href="css/gravityharp.css">

  <!-- Spectral -->
  <link rel="stylesheet" href="css/spectral.css">

  <!-- Insomnichord instrument -->
  <link rel="stylesheet" href="css/theme-engine.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/themes/om-27.css" id="theme-stylesheet">
</head>
<body>

  <!-- Transitioning background -->
  <div id="site-bg"></div>

  <!-- Logo -->
  <div id="site-logo">
    <img src="img/logo.png" alt="openmodul" id="site-logo-img">
  </div>

  <!-- Back button (appears when instrument is open) -->
  <button id="back-btn" class="back-hidden" title="Back to carousel (Esc)">&larr;</button>

  <!-- Carousel labels (positioned by site.js) -->
  <div id="carousel-labels"></div>

  <!-- Window layer — all windows live here, shown small in carousel mode -->
  <div id="window-layer">

    <!-- ========== INSOMNICHORD (chromeless — raw D-shape) ========== -->
    <div id="wm-insomnichord" class="wm-window wm-chromeless" style="--wm-accent: #c8a84e;">
      <div class="wm-content">
        <div id="page">
          <div id="omnichord-body">
            <div id="omnichord-bezel">

              <!-- Brand strip -->
              <div id="brand-strip">
                <span class="brand-engraving" aria-hidden="true">&nbsp;(@_@)&nbsp;</span>
                <span class="brand-name">INSOMNICHORD</span>
                <span class="brand-model" id="brand-model">IM-01</span>
              </div>

              <!-- Controls tray -->
              <div id="controls-tray">
                <button id="help-btn" title="Keyboard shortcuts">?</button>
                <div class="tray-group">
                  <label for="theme-select">Theme</label>
                  <select id="theme-select">
                    <option value="plain">Plain</option>
                    <option value="om-27" selected>OM-27 (1981)</option>
                    <option value="om-36">OM-36 (1984)</option>
                    <option value="om-84">OM-84 (1988)</option>
                    <option value="om-300">OM-300 (1999)</option>
                    <option value="om-108">OM-108 (2023)</option>
                    <option value="custom">Custom</option>
                  </select>
                </div>
                <div class="tray-group midi-group">
                  <label for="midi-output">MIDI</label>
                  <select id="midi-output"><option value="">Out: None</option></select>
                  <select id="midi-input"><option value="">In: None</option></select>
                </div>
              </div>

              <!-- Custom Theme Panel -->
              <div id="custom-theme-panel" class="hidden">
                <h3>Custom Theme</h3>
                <div class="color-pickers">
                  <div class="color-row">
                    <label>Background</label>
                    <input type="color" data-var="--body-bg" value="#1a1a2e">
                    <button class="eyedrop-btn" data-var="--body-bg" title="Pick from screen">&#128065;</button>
                  </div>
                  <div class="color-row">
                    <label>Buttons</label>
                    <input type="color" data-var="--btn-bg" value="#16213e">
                    <button class="eyedrop-btn" data-var="--btn-bg" title="Pick from screen">&#128065;</button>
                  </div>
                  <div class="color-row">
                    <label>Active</label>
                    <input type="color" data-var="--btn-active" value="#e94560">
                    <button class="eyedrop-btn" data-var="--btn-active" title="Pick from screen">&#128065;</button>
                  </div>
                  <div class="color-row">
                    <label>Accent 1</label>
                    <input type="color" data-var="--accent-1" value="#0f3460">
                    <button class="eyedrop-btn" data-var="--accent-1" title="Pick from screen">&#128065;</button>
                  </div>
                  <div class="color-row">
                    <label>Accent 2</label>
                    <input type="color" data-var="--accent-2" value="#533483">
                    <button class="eyedrop-btn" data-var="--accent-2" title="Pick from screen">&#128065;</button>
                  </div>
                  <div class="color-row">
                    <label>Text</label>
                    <input type="color" data-var="--text-primary" value="#eaeaea">
                    <button class="eyedrop-btn" data-var="--text-primary" title="Pick from screen">&#128065;</button>
                  </div>
                  <div class="color-row">
                    <label>Strip Glow</label>
                    <input type="color" data-var="--strip-glow" value="#e94560">
                    <button class="eyedrop-btn" data-var="--strip-glow" title="Pick from screen">&#128065;</button>
                  </div>
                </div>
                <div class="palette-extract">
                  <input type="text" id="palette-url" placeholder="Paste image URL for palette extraction...">
                  <button id="extract-palette-btn">Extract</button>
                  <div id="palette-drop-zone">drop, click, or paste image</div>
                  <canvas id="palette-canvas" class="hidden"></canvas>
                </div>
                <div class="theme-actions">
                  <button id="save-custom-theme">Save</button>
                  <button id="load-custom-theme">Load</button>
                  <button id="export-custom-theme">Export</button>
                  <input type="file" id="import-theme-file" accept=".json" class="hidden">
                  <button id="import-custom-theme">Import</button>
                </div>
              </div>

              <!-- Instrument face -->
              <div id="instrument">

                <!-- Chord buttons -->
                <section id="chord-section">
                  <div id="chord-grid"></div>
                </section>

                <!-- Sonic Strings touch strip -->
                <section id="strings-section">
                  <div class="section-label">SONIC STRINGS</div>
                  <div id="strings-strip">
                    <canvas id="strings-canvas"></canvas>
                    <div id="strings-overlay"></div>
                  </div>
                  <div id="strings-controls">
                    <select id="strings-voice">
                      <optgroup label="Omnichord">
                        <option value="om27" selected>OM-27 Harp</option>
                        <option value="om84">OM-84 Harp</option>
                        <option value="om300">OM-300 Digital</option>
                      </optgroup>
                      <optgroup label="Retro">
                        <option value="8bit">8-Bit</option>
                        <option value="chip">Chip Lead</option>
                        <option value="triangle">Triangle</option>
                      </optgroup>
                      <optgroup label="Synth">
                        <option value="shimmer">Shimmer</option>
                        <option value="bell">Bell</option>
                        <option value="pad">Warm Pad</option>
                      </optgroup>
                    </select>
                    <button id="vibrato-btn" title="Vibrato (V)">VIB</button>
                    <label>Sus</label>
                    <input type="range" id="strings-sustain" min="0" max="100" value="50">
                    <label>Vol</label>
                    <input type="range" id="strings-volume" min="0" max="100" value="75">
                    <label>Reverb</label>
                    <input type="range" id="strings-reverb" min="0" max="100" value="40">
                  </div>
                </section>

                <!-- Rhythm machine -->
                <section id="rhythm-section">
                  <div id="rhythm-controls">
                    <button id="rhythm-start-stop">&#9654;</button>
                    <button id="metronome-btn" title="Metronome (M)">&#9834;</button>
                    <div class="rhythm-param">
                      <select id="rhythm-pattern">
                        <option value="rock">Rock</option>
                        <option value="16beat">16-Beat</option>
                        <option value="waltz">Waltz</option>
                        <option value="bossa">Bossa Nova</option>
                        <option value="samba">Samba</option>
                        <option value="swing">Swing</option>
                        <option value="march">March</option>
                        <option value="disco">Disco</option>
                      </select>
                    </div>
                    <div class="rhythm-param">
                      <label>Tempo</label>
                      <input type="range" id="rhythm-tempo" min="60" max="200" value="120">
                      <span id="tempo-display">120</span>
                    </div>
                    <div class="rhythm-param">
                      <label>Vol</label>
                      <input type="range" id="rhythm-volume" min="0" max="100" value="60">
                    </div>
                    <div id="beat-indicator"></div>
                  </div>
                </section>

                <!-- Loop recorder -->
                <section id="recorder-section">
                  <div id="recorder-controls">
                    <button id="rec-record" class="rec-btn" title="Record">&#9679;</button>
                    <button id="rec-overdub" class="rec-btn" title="Overdub">+</button>
                    <button id="rec-play" class="rec-btn" title="Play">&#9654;</button>
                    <button id="rec-stop" class="rec-btn" title="Stop">&#9632;</button>
                    <button id="rec-clear" class="rec-btn" title="Clear">&#10005;</button>
                    <select id="rec-loop-length" class="rec-select">
                      <option value="free">Free</option>
                      <option value="1">1 Bar</option>
                      <option value="2">2 Bars</option>
                      <option value="4" selected>4 Bars</option>
                      <option value="8">8 Bars</option>
                    </select>
                    <button id="rec-export-wav" class="rec-btn" title="Export WAV">WAV</button>
                    <button id="rec-export-midi" class="rec-btn" title="Export MIDI">MID</button>
                  </div>
                  <div id="recorder-timeline">
                    <canvas id="timeline-canvas"></canvas>
                    <div id="playback-head"></div>
                  </div>
                </section>
              </div>

              <!-- Speaker grill -->
              <div id="speaker-grill">
                <div class="grill-pattern"></div>
              </div>

            </div>
          </div>

          <!-- Keyboard Shortcuts Overlay -->
          <div id="shortcuts-overlay" class="hidden">
            <div class="shortcuts-content">
              <h3>Keyboard Shortcuts</h3>
              <div class="shortcut-group-label">CHORDS</div>
              <div class="shortcut-row"><kbd>1</kbd>-<kbd>9</kbd> <kbd>0</kbd> <kbd>-</kbd> <kbd>=</kbd> Select root (C C# D Eb E F F# G Ab A Bb B)</div>
              <div class="shortcut-row"><kbd>Q</kbd> Major &nbsp; <kbd>W</kbd> Minor &nbsp; <kbd>E</kbd> 7th</div>
              <div class="shortcut-row-note">Click same chord to deselect</div>
              <div class="shortcut-group-label">SONIC STRINGS</div>
              <div class="shortcut-row"><kbd>V</kbd> Vibrato on/off</div>
              <div class="shortcut-row-note">Click &amp; drag strip to strum. Faster = brighter + louder</div>
              <div class="shortcut-group-label">RHYTHM</div>
              <div class="shortcut-row"><kbd>Space</kbd> Start / Stop rhythm</div>
              <div class="shortcut-row"><kbd>M</kbd> Metronome on/off</div>
              <div class="shortcut-row"><kbd>&uarr;</kbd> / <kbd>&darr;</kbd> Tempo &plusmn;5 BPM</div>
              <div class="shortcut-group-label">RECORDING</div>
              <div class="shortcut-row"><kbd>R</kbd> Record (1-bar count-in)</div>
              <div class="shortcut-row"><kbd>P</kbd> Play / Stop loop</div>
              <div class="shortcut-group-label">GENERAL</div>
              <div class="shortcut-row"><kbd>?</kbd> Toggle this help</div>
              <button id="close-shortcuts">Close</button>
            </div>
          </div>

          <!-- Audio Start Overlay (hidden — site shell handles audio init via card click) -->
          <div id="audio-start-overlay" class="hidden">
            <div class="start-content">
              <div class="start-logo">INSOMNICHORD</div>
              <p>Click anywhere to start</p>
            </div>
          </div>

        </div>
      </div>
    </div>
    <!-- end Insomnichord window -->

    <!-- ========== GUM MODUL (chromeless — raw stompbox) ========== -->
    <div id="wm-gummodul" class="wm-window wm-chromeless" style="--wm-accent: #e8a0b8;">
      <div class="wm-content">
        <div id="gummodul-body" class="skin-gum">
          <input type="file" id="gummodul-file" accept="audio/*,.mp3,.wav,.ogg,.flac,.aac,.m4a">

          <div class="gm-brand">
            <div>
              <div class="gm-brand-name">Gum Modul</div>
              <div class="gm-brand-sub">Analog Effects Processor</div>
            </div>
          </div>

          <div class="gm-input-section">
            <div class="gm-dropzone" id="gm-dropzone">
              <span class="drop-icon">&#9835;</span>
              <span class="drop-text" id="gm-drop-text">Drop audio file or click to browse</span>
            </div>
            <div class="gm-source-btns">
              <button class="gm-source-btn active" data-source="file">FILE</button>
              <button class="gm-source-btn" data-source="mic">MIC</button>
              <button class="gm-source-btn" data-source="osc">TEST</button>
            </div>
            <div class="gm-playback-btns">
              <button class="gm-play-btn" id="gm-playpause" title="Play / Pause">&#9654;</button>
              <button class="gm-play-btn" id="gm-stop" title="Stop">&#9632;</button>
            </div>
            <div class="gm-knob-group">
              <canvas class="gm-knob-canvas" data-knob="drive" width="96" height="96"></canvas>
              <div class="gm-knob-label">Drive</div>
              <div class="gm-knob-value"></div>
            </div>
          </div>

          <div class="gm-effects-row">
            <!-- Filter MF-101 -->
            <div class="gm-effect" id="gm-fx-filter">
              <div class="gm-effect-header">
                <div>
                  <div class="gm-effect-name">Low-Pass Filter</div>
                  <div class="gm-effect-model">MF-101</div>
                </div>
                <button class="gm-bypass" data-fx="filter">
                  <span class="gm-led on"></span>
                  <span>ON</span>
                </button>
              </div>
              <div class="gm-knobs">
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="filter-cutoff" width="96" height="96"></canvas><div class="gm-knob-label">Cutoff</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="filter-resonance" width="96" height="96"></canvas><div class="gm-knob-label">Resonance</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="filter-env" width="96" height="96"></canvas><div class="gm-knob-label">Env Amt</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="filter-lfo" width="96" height="96"></canvas><div class="gm-knob-label">LFO Rate</div><div class="gm-knob-value"></div></div>
              </div>
            </div>

            <!-- Ring Mod MF-102 -->
            <div class="gm-effect" id="gm-fx-ringmod">
              <div class="gm-effect-header">
                <div>
                  <div class="gm-effect-name">Ring Mod</div>
                  <div class="gm-effect-model">MF-102</div>
                </div>
                <button class="gm-bypass" data-fx="ringmod">
                  <span class="gm-led on"></span>
                  <span>ON</span>
                </button>
              </div>
              <div class="gm-knobs">
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="ring-freq" width="96" height="96"></canvas><div class="gm-knob-label">Carrier</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="ring-lfo-rate" width="96" height="96"></canvas><div class="gm-knob-label">LFO Rate</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="ring-lfo-depth" width="96" height="96"></canvas><div class="gm-knob-label">LFO Depth</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="ring-mix" width="96" height="96"></canvas><div class="gm-knob-label">Mix</div><div class="gm-knob-value"></div></div>
              </div>
            </div>

            <!-- Phaser MF-103 -->
            <div class="gm-effect" id="gm-fx-phaser">
              <div class="gm-effect-header">
                <div>
                  <div class="gm-effect-name">Phaser</div>
                  <div class="gm-effect-model">MF-103</div>
                </div>
                <button class="gm-bypass" data-fx="phaser">
                  <span class="gm-led on"></span>
                  <span>ON</span>
                </button>
              </div>
              <div class="gm-knobs">
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="phaser-rate" width="96" height="96"></canvas><div class="gm-knob-label">Rate</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="phaser-depth" width="96" height="96"></canvas><div class="gm-knob-label">Depth</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="phaser-feedback" width="96" height="96"></canvas><div class="gm-knob-label">Feedback</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="phaser-stages" width="96" height="96"></canvas><div class="gm-knob-label">Stages</div><div class="gm-knob-value"></div></div>
              </div>
            </div>

            <!-- Delay MF-104 -->
            <div class="gm-effect" id="gm-fx-delay">
              <div class="gm-effect-header">
                <div>
                  <div class="gm-effect-name">Delay</div>
                  <div class="gm-effect-model">MF-104</div>
                </div>
                <button class="gm-bypass" data-fx="delay">
                  <span class="gm-led on"></span>
                  <span>ON</span>
                </button>
              </div>
              <div class="gm-knobs">
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="delay-time" width="96" height="96"></canvas><div class="gm-knob-label">Time</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="delay-feedback" width="96" height="96"></canvas><div class="gm-knob-label">Feedback</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="delay-mix" width="96" height="96"></canvas><div class="gm-knob-label">Mix</div><div class="gm-knob-value"></div></div>
                <div class="gm-knob-group"><canvas class="gm-knob-canvas" data-knob="delay-lfo" width="96" height="96"></canvas><div class="gm-knob-label">LFO Rate</div><div class="gm-knob-value"></div></div>
              </div>
            </div>
          </div>

          <div class="gm-output-section">
            <div class="gm-output-knobs">
              <div class="gm-knob-group">
                <canvas class="gm-knob-canvas" data-knob="output" width="96" height="96"></canvas>
                <div class="gm-knob-label">Output</div>
                <div class="gm-knob-value"></div>
              </div>
            </div>
            <div class="gm-skin-selector">
              <span class="gm-skin-label">Skin</span>
              <button class="gm-skin-btn active" data-skin="gum" title="Bubblegum"></button>
              <button class="gm-skin-btn" data-skin="og" title="OG Moog"></button>
              <button class="gm-skin-btn" data-skin="midnight" title="Midnight"></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ========== NULLAMP WINDOW ========== -->
    <div id="wm-nullamp" class="wm-window" style="--wm-accent: #40c040;">
      <div class="wm-titlebar">
        <div class="wm-accent"></div>
        <canvas id="nullamp-logo" class="nullamp-logo"></canvas>
        <div class="wm-controls">
          <button class="wm-btn wm-minimize">_</button>
          <button class="wm-btn wm-close">&times;</button>
        </div>
      </div>
      <div class="wm-content" style="background: #0a0a10;">
        <div id="nullamp-body">
          <input type="file" id="nullamp-file" accept=".mp3,.wav,.ogg,.flac,.aac,.m4a,.webm,.mp4,audio/*">
          <div id="nullamp-display">
            <canvas id="nullamp-canvas"></canvas>
            <div id="nullamp-dropzone">
              <div class="drop-icon">&#9835;</div>
              <div class="drop-text">Drop audio file here</div>
              <div class="drop-hint">or click to browse</div>
            </div>
          </div>
          <div id="nullamp-controls">
            <div class="nullamp-ctrl-group">
              <button class="nullamp-nav-btn" id="nullamp-playpause">&#9654;</button>
              <button class="nullamp-nav-btn" id="nullamp-reset" title="Load new file">&#8635;</button>
              <span id="nullamp-filename"></span>
            </div>
            <div class="nullamp-spacer"></div>
            <div class="nullamp-ctrl-group">
              <label>Mode</label>
              <div class="nullamp-mode-toggle" id="nullamp-mode-toggle">
                <button class="nullamp-mode-btn active" data-mode="0">I</button>
                <button class="nullamp-mode-btn" data-mode="1">II</button>
              </div>
            </div>
            <div class="nullamp-ctrl-group">
              <label>Color</label>
              <select id="nullamp-scheme"></select>
            </div>
            <div class="nullamp-ctrl-group">
              <label>Gain</label>
              <input type="range" id="nullamp-gain" min="0" max="100" value="50">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ========== PATCHWERK (chromeless — modular synth workspace) ========== -->
    <div id="wm-patchwerk" class="wm-window wm-chromeless" style="--wm-accent: #8c6a3e;">
      <div class="wm-content">
        <div id="patchwerk-body" class="skin-circuit">
          <div class="pw-toolbar">
            <span class="pw-brand">Patchwerk</span>
            <div class="pw-toolbar-group">
              <select class="pw-preset-select" id="pw-preset">
                <option value="">+ New Patch</option>
                <option value="simple">Simple Tone</option>
                <option value="bass">Bass</option>
                <option value="lead">Sci-Fi Lead</option>
                <option value="pad">Ambient Pad</option>
              </select>
            </div>
            <button class="pw-add-btn" data-type="osc">+OSC</button>
            <button class="pw-add-btn" data-type="lfo">+LFO</button>
            <button class="pw-add-btn" data-type="flt">+FLT</button>
            <button class="pw-add-btn" data-type="amp">+AMP</button>
            <button class="pw-add-btn" data-type="dly">+DLY</button>
            <div class="pw-toolbar-spacer"></div>
            <div class="pw-skin-selector">
              <span class="pw-skin-label">Skin</span>
              <button class="pw-skin-btn active" data-skin="circuit" title="Moog (1970)"></button>
              <button class="pw-skin-btn" data-skin="ember" title="Buchla (1975)"></button>
              <button class="pw-skin-btn" data-skin="acid" title="Roland (1981)"></button>
            </div>
          </div>
          <div class="pw-workspace">
            <svg class="pw-cables" xmlns="http://www.w3.org/2000/svg"></svg>
          </div>
        </div>
      </div>
    </div>

    <!-- ========== GRAVITY HARP (chromeless — void instrument) ========== -->
    <div id="wm-gravityharp" class="wm-window wm-chromeless" style="--wm-accent: #b0b8d0;">
      <div class="wm-content">
        <div id="gravityharp-body" class="skin-void">
          <div class="gh-toolbar">
            <span class="gh-brand">Gravity Harp</span>
            <div class="gh-toolbar-group">
              <label class="gh-label">Strings</label>
              <select id="gh-tuning">
                <option value="pentatonic">Pentatonic</option>
                <option value="chromatic">Chromatic</option>
                <option value="whole">Whole Tone</option>
                <option value="minor">Natural Minor</option>
                <option value="major">Major</option>
              </select>
            </div>
            <div class="gh-toolbar-group">
              <label class="gh-label">Mass</label>
              <input type="range" id="gh-mass" min="1" max="5" value="2" step="1">
            </div>
            <div class="gh-toolbar-group">
              <label class="gh-label">Reverb</label>
              <input type="range" id="gh-reverb" min="0" max="100" value="60">
            </div>
            <div class="gh-toolbar-group">
              <label class="gh-label">Gravity</label>
              <input type="range" id="gh-gravity" min="10" max="200" value="80">
            </div>
            <div class="gh-toolbar-spacer"></div>
            <button class="gh-clear-btn" id="gh-clear" title="Clear particles">CLR</button>
            <div class="gh-skin-selector">
              <span class="gh-skin-label">Skin</span>
              <button class="gh-skin-btn active" data-skin="void" title="Void"></button>
              <button class="gh-skin-btn" data-skin="nebula" title="Nebula"></button>
              <button class="gh-skin-btn" data-skin="quasar" title="Quasar"></button>
            </div>
          </div>
          <div class="gh-stage">
            <canvas id="gh-canvas"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- ========== SPECTRAL (chromeless — spectral freezer) ========== -->
    <div id="wm-spectral" class="wm-window wm-chromeless" style="--wm-accent: #ff2080;">
      <div class="wm-content">
        <div id="spectral-body" class="skin-acid">
          <div class="sp-toolbar">
            <span class="sp-brand">Spectral</span>
            <div class="sp-toolbar-group">
              <button class="sp-source-btn active" data-source="drone">DRONE</button>
              <button class="sp-source-btn" data-source="mic">MIC</button>
              <button class="sp-source-btn" data-source="file">FILE</button>
              <input type="file" id="sp-file" accept="audio/*" class="sp-hidden">
            </div>
            <button class="sp-freeze-btn" id="sp-freeze">FREEZE</button>
            <div class="sp-toolbar-group">
              <label class="sp-label">Attack</label>
              <input type="range" id="sp-attack" min="1" max="500" value="20">
            </div>
            <div class="sp-toolbar-group">
              <label class="sp-label">Release</label>
              <input type="range" id="sp-release" min="10" max="2000" value="400">
            </div>
            <div class="sp-toolbar-group">
              <label class="sp-label">Reverb</label>
              <input type="range" id="sp-reverb" min="0" max="100" value="50">
            </div>
            <div class="sp-toolbar-spacer"></div>
            <div class="sp-skin-selector">
              <span class="sp-skin-label">Skin</span>
              <button class="sp-skin-btn active" data-skin="acid" title="Acid"></button>
              <button class="sp-skin-btn" data-skin="chrome" title="Chrome"></button>
              <button class="sp-skin-btn" data-skin="noise" title="Noise"></button>
            </div>
          </div>
          <div class="sp-display">
            <canvas id="sp-canvas"></canvas>
            <div class="sp-freeze-label" id="sp-freeze-indicator">LIVE</div>
          </div>
          <div class="sp-keyboard" id="sp-keyboard"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- Site scripts (load first — they set up the shell) -->
  <script src="js/windows.js"></script>
  <script src="js/site.js"></script>

  <!-- Insomnichord scripts -->
  <script src="js/audio.js"></script>
  <script src="js/chords.js"></script>
  <script src="js/strings.js"></script>
  <script src="js/rhythm.js"></script>
  <script src="js/midi.js"></script>
  <script src="js/recorder.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/ui.js"></script>

  <!-- Nullamp visualizer -->
  <script src="js/nullamp.js?v=24"></script>

  <!-- Gum Modul effects pedal -->
  <script src="js/gummodul.js"></script>

  <!-- Patchwerk modular synth -->
  <script src="js/patchwerk.js"></script>

  <!-- Gravity Harp -->
  <script src="js/gravityharp.js"></script>

  <!-- Spectral -->
  <script src="js/spectral.js"></script>
</body>
</html>
